<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML Experimental 19960712//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="drm_1.htm">
<LINK REL=UP HREF="drm_52.htm">
<LINK REL=PREV HREF="drm_54.htm">
<LINK REL=NEXT HREF="drm_56.htm">
<LINK TITLE="WebMaker generated style" REL=stylesheet HREF=drm.css TYPE="text/css">
<TITLE> Signalers, Conditions, and Handlers</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV CLASS=WM-DIV-BODY>
<A NAME=HEADING55></A>

<DIV CLASS=WM-DIV-HEADERS>
<P CLASS=HEADER><A HREF="drm_56.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=next.gif CLASS=HEADER></A> <A HREF="drm_54.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=prev.gif CLASS=HEADER></A> <A HREF="drm_52.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=up.gif CLASS=HEADER></A> <A HREF="drm_1.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=top.gif CLASS=HEADER></A> <A HREF="drm_2.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=content.gif CLASS=HEADER></A> <A HREF="drm_127.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=index.gif CLASS=HEADER></A></P>
<P CLASS=HEADER>7 Conditions</P>

</DIV>
<A NAME=HEADING55-0></A>
<A NAME=UID-Conditions-1987></A>
<H1 CLASS=H1.Heading1> Signalers, Conditions, and Handlers</H1>
<P CLASS=T1.Text1>A condition is an object used to locate and provide information to a handler. A condition represents a situation that needs to be handled. Examples are <A NAME=MARKER-2-912></A>errors, <A NAME=MARKER-2-913></A>warnings, and attempts to <A NAME=MARKER-2-914></A>recover from errors. All conditions are instances of <CODE CLASS="Code T1.Text1"><A NAME=MARKER-2-915></A>&lt;condition&gt;</CODE>. Several subclasses of <CODE CLASS="Code T1.Text1">&lt;condition&gt;</CODE> are provided for additional behavior. These are described in <A HREF="drm_95.htm#MARKER-9-1472" CLASS=T1.Text1>"Conditions" on page 244</A>.</P>
<P CLASS=T1.Text1><A NAME=MARKER-2-916></A>A handler is a function for handling conditions of a particular type. Handlers may be installed dynamically with the local declaration <CODE CLASS="Code T1.Text1"><A NAME=MARKER-2-917></A>let handler</CODE>, and with the <CODE CLASS="Code T1.Text1"><A NAME=MARKER-2-918></A>exception</CODE> clause of the <CODE CLASS="Code T1.Text1">block</CODE> statement. Dynamically installed handlers are active for the duration of the execution of a body. More recently installed handlers take precedence over less recently installed handlers. If no dynamically installed handler handles a condition, the generic function <CODE CLASS="Code T1.Text1"><A NAME=MARKER-2-919></A>default-handler</CODE> is called. <CODE CLASS="Code T1.Text1">default-handler</CODE> has predefined methods and may also have program-defined methods.<A NAME=MARKER-2-920></A></P>
<P CLASS=T1.Text1>Signaling is the mechanism for locating the most recently installed handler for a condition. The basic mechanism for signaling is the function <CODE CLASS="Code T1.Text1"><A NAME=MARKER-2-921></A>signal</CODE>. Several functions built on <CODE CLASS="Code T1.Text1">signal</CODE> are provided for additional behavior. These are described in <A HREF="drm_107.htm#MARKER-9-1917" CLASS=T1.Text1>"Signaling Conditions" on page 357</A>.</P>
<P CLASS=T1.Text1><A NAME=MARKER-2-922></A>When a condition is signaled, the condition facility locates the most recently installed applicable handler and calls it. An applicable handler is one that matches the signaled condition by type and by an optional test function associated with the handler. The condition system is simply a way for a signaler and a handler to be introduced to each other. Once they have met, they communicate through an ordinary function call. The condition object is the argument to that call.</P>
<P CLASS=T1.Text1>Like any function, the called handler either returns some values or takes a nonlocal exit. Either way, the handler has handled the condition, and the act of signaling is completed.</P>
<P CLASS=T1.Text1><A NAME=MARKER-2-923></A><A NAME=MARKER-2-924></A>A handler also has the option of declining to handle the condition by passing control to the next applicable handler. It does this by tail recursively calling a next-handler function which it received as an argument. The next-handler function calls the next most recently installed applicable handler with appropriate arguments. This is analogous to the next-method function used in methods of generic functions.</P>
<P CLASS=T1.Text1>(The call to next-handler is described as tail-recursive to ensure that all values returned by the call are returned by the handler. Not returning all the values could interfere with the condition's recovery protocol. A handler that really knows what it is doing could use a non-tail-recursive call, but anything that knows what it's doing in this situation is probably unmodular. Note that a handler might not know the full recovery protocol, because the condition might be a subtype of the handler's expected type.)</P>
<P CLASS=T1.Text1>Every signaled condition is handled, because the system ensures that there is always an applicable default handler that does not decline.</P>
<P CLASS=T1.Text1>If a handler handles a condition by returning (rather than by taking a nonlocal exit) the values it returns are returned by <CODE CLASS="Code T1.Text1">signal</CODE>.</P>

</DIV>

<DIV CLASS=WM-DIV-FOOTERS>

<DIV CLASS=WM-DIV-TOC>

<!-- TOC -->

</DIV>

<HR CLASS=FOOTER>
<ADDRESS CLASS=FOOTER>The Dylan Reference Manual - 7 Apr 1998</ADDRESS>
<P CLASS=FOOTER><A HREF="drm_56.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=next.gif CLASS=HEADER></A> <A HREF="drm_54.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=prev.gif CLASS=HEADER></A> <A HREF="drm_52.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=up.gif CLASS=HEADER></A> <A HREF="drm_1.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=top.gif CLASS=HEADER></A> <A HREF="drm_2.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=content.gif CLASS=HEADER></A> <A HREF="drm_127.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=index.gif CLASS=HEADER></A></P>
<P CLASS=FOOTER>Copyright Apple Computer, Inc. 1996. Apple&#174; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</P>
<P CLASS=FOOTER>You can order a <A HREF="http://www.harlequin.com/products/ads/dylan/purchase.shtml" CLASS=FOOTER>bound copy</A> of this book from Harlequin.</P>
<P CLASS=FOOTER>Generated with <A HREF="http://www.harlequin.com/webmaker" CLASS=FOOTER>Harlequin WebMaker&#174;</A></P>

</DIV>
</BODY>
</HTML>
