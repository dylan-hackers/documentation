<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML Experimental 19960712//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="drm_1.htm">
<LINK REL=UP HREF="drm_76.htm">
<LINK REL=PREV HREF="drm_82.htm">
<LINK REL=NEXT HREF="drm_84.htm">
<LINK TITLE="WebMaker generated style" REL=stylesheet HREF=drm.css TYPE="text/css">
<TITLE> Templates</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV CLASS=WM-DIV-BODY>
<A NAME=HEADING83></A>

<DIV CLASS=WM-DIV-HEADERS>
<P CLASS=HEADER><A HREF="drm_84.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=next.gif CLASS=HEADER></A> <A HREF="drm_82.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=prev.gif CLASS=HEADER></A> <A HREF="drm_76.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=up.gif CLASS=HEADER></A> <A HREF="drm_1.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=top.gif CLASS=HEADER></A> <A HREF="drm_2.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=content.gif CLASS=HEADER></A> <A HREF="drm_127.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=index.gif CLASS=HEADER></A></P>
<P CLASS=HEADER>10 Macros</P>

</DIV>
<A NAME=HEADING83-0></A>
<A NAME=UID-Macros-1805></A>
<H1 CLASS=H1.Heading1> Templates</H1>
<P CLASS=T1.Text1><A NAME=MARKER-2-1262></A>Approximately speaking, a template has the same structure as what it constructs, but contains pattern variables that will be replaced by fragments extracted from the macro call. Thus a template in the <I CLASS="Parameter T1.Text1">main-rule-set</I>  looks like the macro expansion.</P>
<P CLASS=T1.Text1>However, templates do not have a full grammar. A template is essentially any sequence of tokens and <I CLASS="Parameter T1.Text1">substitutions</I> in which all of Dylan's brackets are balanced: <CODE CLASS="cv T1.Text1">()</CODE>, <CODE CLASS="cv T1.Text1">[]</CODE>, <CODE CLASS="cv T1.Text1">{}</CODE>, <CODE CLASS="cv T1.Text1">#()</CODE>, and <CODE CLASS="cv T1.Text1">#[]</CODE>. Substitution for pattern variables produces a sequence of tokens and other elementary fragments. </P>
<P CLASS=T1.Text1><A NAME=MARKER-2-1263></A>Note that using unparsed token sequences as templates allows a macro expansion to contain macro calls without creating any inter-dependencies between macros. Since the template is not parsed at macro definition time, any macros called in the template do not have to be defined first, and macros can be compiled independently of each other. This simplifies the implementation at the minor cost of deferring some error checking from when a macro is defined until the time when the macro is called.</P>
<P CLASS=T1.Text1>The grammar for templates is the definition of <I CLASS="Parameter T1.Text1">template </I> in <A HREF="drm_118.htm#MARKER-9-2119" CLASS=T1.Text1>"Templates" on page 429</A>.</P>
<P CLASS=T1.Text1>All <I CLASS="Parameter T1.Text1">template-elements</I>  other than <I CLASS="Parameter T1.Text1">substitution</I>  are copied directly into the macro expansion. The various kinds of <I CLASS="Parameter T1.Text1">substitution</I>  insert something else into the macro expansion, as follows:</P>
<DL CLASS=RP.RoutineParam>
<DL CLASS=RP.RoutineParam>
<DT CLASS=RP.RoutineParam><CODE CLASS="cv RP.RoutineParam">? <EM CLASS="cv RP.RoutineParam">name</EM></CODE><DD CLASS=RP.RoutineParam><P CLASS=RP.RoutineParam> The fragment bound to the pattern variable named <EM CLASS=RP.RoutineParam>name</EM>.</P>
<DT CLASS=RP.RoutineParam><I CLASS="Parameter RP.RoutineParam">name-prefix<EM CLASS="Subscript Parameter RP.RoutineParam">opt<CODE CLASS="cv Subscript Parameter RP.RoutineParam"> ? name-string-or-symbol name-suffixopt</CODE></EM></I>  <DD CLASS=RP.RoutineParam><P CLASS=RP.RoutineParam></P>
<DT CLASS=RP.RoutineParam><DD CLASS=RP.RoutineParam><P CLASS=RP.RoutineParam> The fragment bound to the pattern variable named <I CLASS="Parameter RP.RoutineParam">name-string-or-symbol</I>, converted to a <EM CLASS=RP.RoutineParam>string</EM> or <EM CLASS=RP.RoutineParam>symbol</EM> and/or concatenated with a prefix and/or suffix. Note that this rule applies only when the first rule does not. The fragment must be a <EM CLASS=RP.RoutineParam>name</EM>. Concatenate the prefix, if any, the characters of the fragment, and the suffix, if any. The alphabetic case of the characters of the fragment is unspecified. Convert this to the same grammatical type (<EM CLASS=RP.RoutineParam>name</EM>, <EM CLASS=RP.RoutineParam>string</EM>, or <EM CLASS=RP.RoutineParam>symbol</EM>) as <I CLASS="Parameter RP.RoutineParam">name-string-or-symbol</I>. When the result is a <EM CLASS=RP.RoutineParam>name</EM>, its hygiene context is the same as that of the fragment.</P>
<DT CLASS=RP.RoutineParam><CODE CLASS="cv RP.RoutineParam">?? <EM CLASS="cv RP.RoutineParam">name</EM></CODE>  <I CLASS="Parameter RP.RoutineParam">separator<EM CLASS="Subscript Parameter RP.RoutineParam">opt<CODE CLASS="cv Subscript Parameter RP.RoutineParam"> ...</CODE></EM></I><DD CLASS=RP.RoutineParam><P CLASS=RP.RoutineParam></P>
<DT CLASS=RP.RoutineParam><CODE CLASS=RP.RoutineParam></CODE><DD CLASS=RP.RoutineParam><P CLASS=RP.RoutineParam> The sequence of fragments bound to the pattern variable named <EM CLASS=RP.RoutineParam>name</EM>, with <I CLASS="Parameter RP.RoutineParam">separator</I> inserted between each pair of fragments. The pattern variable must have been bound by a <CODE CLASS="cv RP.RoutineParam">??</CODE> <I CLASS="Parameter RP.RoutineParam">pattern-keyword.</I> <I CLASS="Parameter RP.RoutineParam">Separator</I> can be a binary operator, comma, or semicolon. If the size of the sequence is 1 or <I CLASS="Parameter RP.RoutineParam">separator</I> is omitted, no separator is inserted. If the sequence is empty, nothing is inserted.</P>
<DT CLASS=RP.RoutineParam><CODE CLASS="cv RP.RoutineParam">...</CODE><DD CLASS=RP.RoutineParam><P CLASS=RP.RoutineParam> The fragment bound to the pattern variable that names this rule set; this is only valid in an auxiliary rule set.</P>
<DT CLASS=RP.RoutineParam><CODE CLASS="cv RP.RoutineParam">?= <EM CLASS="cv RP.RoutineParam">name</EM></CODE> <DD CLASS=RP.RoutineParam><P CLASS=RP.RoutineParam> A reference to <EM CLASS=RP.RoutineParam>NAME</EM>, in the lexical context where the macro was called.</P>
<P CLASS=T1.Text1>It is an error for a single question-mark <I CLASS="Parameter T1.Text1">substitution</I>  to use a pattern variable that was bound by a double question-mark <I CLASS="Parameter T1.Text1">pattern-keyword.</I> </P>
<P CLASS=T1.Text1>It is an error for a double question-mark <I CLASS="Parameter T1.Text1">substitution</I>  to use a pattern variable that was bound by a single question-mark <I CLASS="Parameter T1.Text1">pattern-variable</I> or <I CLASS="Parameter T1.Text1">pattern-keyword.</I> </P>
<P CLASS=T1.Text1>It is an error for a <I CLASS="Parameter T1.Text1">substitution</I> to use a pattern variable that does not appear on the left-hand side of the same rule.</P>
<P CLASS=T1.Text1>When a template contains a <I CLASS="Parameter T1.Text1">separator</I> immediately followed by a <I CLASS="Parameter T1.Text1">substitution</I>, and the fragment inserted into the macro expansion by the <I CLASS="Parameter T1.Text1">substitution</I> is empty, the separator is removed from the macro expansion.<A NAME=MARKER-2-1264></A></P>
</DL>
</DL>

</DIV>

<DIV CLASS=WM-DIV-FOOTERS>

<DIV CLASS=WM-DIV-TOC>

<!-- TOC -->

</DIV>

<HR CLASS=FOOTER>
<ADDRESS CLASS=FOOTER>The Dylan Reference Manual - 7 Apr 1998</ADDRESS>
<P CLASS=FOOTER><A HREF="drm_84.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=next.gif CLASS=HEADER></A> <A HREF="drm_82.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=prev.gif CLASS=HEADER></A> <A HREF="drm_76.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=up.gif CLASS=HEADER></A> <A HREF="drm_1.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=top.gif CLASS=HEADER></A> <A HREF="drm_2.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=content.gif CLASS=HEADER></A> <A HREF="drm_127.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=index.gif CLASS=HEADER></A></P>
<P CLASS=FOOTER>Copyright Apple Computer, Inc. 1996. Apple&#174; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</P>
<P CLASS=FOOTER>You can order a <A HREF="http://www.harlequin.com/products/ads/dylan/purchase.shtml" CLASS=FOOTER>bound copy</A> of this book from Harlequin.</P>
<P CLASS=FOOTER>Generated with <A HREF="http://www.harlequin.com/webmaker" CLASS=FOOTER>Harlequin WebMaker&#174;</A></P>

</DIV>
</BODY>
</HTML>
