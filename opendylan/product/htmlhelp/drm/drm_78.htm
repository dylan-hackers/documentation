<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML Experimental 19960712//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="drm_1.htm">
<LINK REL=UP HREF="drm_76.htm">
<LINK REL=PREV HREF="drm_77.htm">
<LINK REL=NEXT HREF="drm_79.htm">
<LINK TITLE="WebMaker generated style" REL=stylesheet HREF=drm.css TYPE="text/css">
<TITLE> Extensible Grammar</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV CLASS=WM-DIV-BODY>
<A NAME=HEADING78></A>

<DIV CLASS=WM-DIV-HEADERS>
<P CLASS=HEADER><A HREF="drm_79.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=next.gif CLASS=HEADER></A> <A HREF="drm_77.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=prev.gif CLASS=HEADER></A> <A HREF="drm_76.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=up.gif CLASS=HEADER></A> <A HREF="drm_1.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=top.gif CLASS=HEADER></A> <A HREF="drm_2.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=content.gif CLASS=HEADER></A> <A HREF="drm_127.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=index.gif CLASS=HEADER></A></P>
<P CLASS=HEADER>10 Macros</P>

</DIV>
<A NAME=HEADING78-0></A>
<A NAME=UID-Macros-1543></A>
<H1 CLASS=H1.Heading1> Extensible Grammar</H1>
<P CLASS=T1.Text1><A NAME=MARKER-2-1210></A><A NAME=MARKER-2-1211></A>There are three kinds of macros: definition macros, which extend the available set of definitions; <A NAME=MARKER-2-1212></A>statement macros, which extend the available set of statements; and <A NAME=MARKER-2-1213></A>function macros, which syntactically resemble function calls but are more flexible. <A NAME=MARKER-2-1214></A>Named value references and <A NAME=MARKER-2-1215></A>local declarations cannot be macro calls. Only statements, function calls, and definitions are extensible.</P>
<A NAME=HEADING78-2></A>
<A NAME=UID-Macros-1546></A>
<H2 CLASS=H2.Heading2> Definition Macros</H2>
<P CLASS=T1.Text1><A NAME=MARKER-2-1216></A>A definition macro extends the <I CLASS="Parameter T1.Text1">definition-macro-call </I>production of the Dylan phrase grammar to recognize additional constructs as valid definitions, by creating a new <EM CLASS=T1.Text1>define-body-word<I CLASS=T1.Text1> </I></EM>that is recognized by the following grammar line:</P>
<P CLASS=T1.Text1><I CLASS="italics T1.Text1">definition-macro-call:<BR><CODE CLASS="italics T1.Text1">    define  modifiers<EM CLASS="Subscript italics T1.Text1">opt  define-body-word  body-fragmentopt definition-tail</EM></CODE></I></P>
<P CLASS=T1.Text1>or by creating a new <EM CLASS=T1.Text1>define-list-word<I CLASS=T1.Text1> </I></EM>that is recognized by the following grammar line:</P>
<P CLASS=T1.Text1><I CLASS=T1.Text1>definition-macro-call:<BR><CODE CLASS=T1.Text1>   define</CODE></I>  modifiers<EM CLASS="Subscript T1.Text1">opt</EM>  <EM CLASS=T1.Text1>define-list-word</EM>  list-fragment<EM CLASS="Subscript T1.Text1">opt</EM></P>
<P CLASS=T1.Text1>This allows programmers to extend Dylan by defining new kinds of definitions. The syntax of the definition must be parseable by one of these two predefined grammar rules. The first handles body-style definitions like <CODE CLASS="cv T1.Text1">define class</CODE>, <CODE CLASS="cv T1.Text1">define method</CODE>, and <CODE CLASS="cv T1.Text1">define module</CODE>,  while the second handles list-style definitions like <CODE CLASS="cv T1.Text1">define constant</CODE>. See <A HREF="drm_116.htm#MARKER-9-2090" CLASS=T1.Text1>Appendix A, "BNF,"</A> for the details.</P>
<P CLASS=T1.Text1>The new <EM CLASS=T1.Text1>define-body-word<I CLASS=T1.Text1>  </I></EM>or <EM CLASS=T1.Text1>define-list-word<I CLASS=T1.Text1>  </I></EM>becomes a partially reserved word in each module where the macro definition is visible. In particular a <EM CLASS=T1.Text1>define-body-word<I CLASS=T1.Text1>  </I></EM>or <EM CLASS=T1.Text1>define-list-word<I CLASS=T1.Text1>  </I></EM>cannot be used as a modifier in a definition. It can still be used as a variable-name.<A NAME=MARKER-2-1217></A></P>
<A NAME=HEADING78-9></A>
<A NAME=UID-Macros-1562></A>
<H2 CLASS=H2.Heading2> Statement Macros</H2>
<P CLASS=T1.Text1><A NAME=MARKER-2-1218></A>A statement macro extends the <I CLASS="Parameter T1.Text1">statement</I> production of the Dylan phrase grammar to recognize additional constructs as valid statements by creating a new <EM CLASS=T1.Text1>begin-word</EM> that is recognized by the following grammar line:</P>
<P CLASS=T1.Text1><I CLASS=T1.Text1>statement:<BR></I>   <EM CLASS=T1.Text1>begin-word</EM>  body-fragment<EM CLASS="Subscript T1.Text1">opt</EM> end-clause</P>
<P CLASS=T1.Text1>The new <EM CLASS=T1.Text1>begin-word</EM> becomes a reserved word in each module where the macro definition is visible. It can only be used at the beginning and end of this new statement.<A NAME=MARKER-2-1219></A></P>
<A NAME=HEADING78-13></A>
<A NAME=UID-Macros-1569></A>
<H2 CLASS=H2.Heading2> Function Macros</H2>
<P CLASS=T1.Text1><A NAME=MARKER-2-1220></A>A function macro extends the <I CLASS="Parameter T1.Text1">function-macro-call </I>production of the Dylan phrase grammar to recognize additional constructs by creating a new <EM CLASS=T1.Text1>function-word</EM> that is recognized by the following grammar line:</P>
<P CLASS=T1.Text1><I CLASS="italics T1.Text1">function-macro-call:<BR></I>   function-word<I CLASS=T1.Text1>  <CODE CLASS="cv T1.Text1">(  body-fragment<EM CLASS="Subscript cv T1.Text1">opt )</EM></CODE></I></P>
<P CLASS=T1.Text1>In addition, a function macro can be invoked by any of the shorthand syntax constructs available for invoking functions. In this case, the arguments are always parsed expression fragments, as described on <A HREF="drm_77.htm#MARKER-9-1199" CLASS=T1.Text1>page 146</A>.</P>
<P CLASS=T1.Text1>The new <EM CLASS=T1.Text1>function-word</EM> becomes a reserved word in each module where the macro definition is visible. It can only be used at the beginning of a macro call.<A NAME=MARKER-2-1221></A><A NAME=MARKER-2-1222></A></P>

</DIV>

<DIV CLASS=WM-DIV-FOOTERS>

<DIV CLASS=WM-DIV-TOC>

<!-- TOC --><DL CLASS=FOOTER>
<DT CLASS=FOOTER><A REL=BELOW HREF="drm_78.htm#HEADING78-2" CLASS=FOOTER><B CLASS=FOOTER></B>Definition Macros</A>
<DD CLASS=FOOTER>
<DT CLASS=FOOTER><A REL=BELOW HREF="drm_78.htm#HEADING78-9" CLASS=FOOTER><B CLASS=FOOTER></B>Statement Macros</A>
<DD CLASS=FOOTER>
<DT CLASS=FOOTER><A REL=BELOW HREF="drm_78.htm#HEADING78-13" CLASS=FOOTER><B CLASS=FOOTER></B>Function Macros</A>
<DD CLASS=FOOTER>
</DL>


</DIV>

<HR CLASS=FOOTER>
<ADDRESS CLASS=FOOTER>The Dylan Reference Manual - 7 Apr 1998</ADDRESS>
<P CLASS=FOOTER><A HREF="drm_79.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=next.gif CLASS=HEADER></A> <A HREF="drm_77.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=prev.gif CLASS=HEADER></A> <A HREF="drm_76.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=up.gif CLASS=HEADER></A> <A HREF="drm_1.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=top.gif CLASS=HEADER></A> <A HREF="drm_2.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=content.gif CLASS=HEADER></A> <A HREF="drm_127.htm" CLASS=HEADER><IMG ALIGN=BOTTOM BORDER=0 SRC=index.gif CLASS=HEADER></A></P>
<P CLASS=FOOTER>Copyright Apple Computer, Inc. 1996. Apple&#174; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</P>
<P CLASS=FOOTER>You can order a <A HREF="http://www.harlequin.com/products/ads/dylan/purchase.shtml" CLASS=FOOTER>bound copy</A> of this book from Harlequin.</P>
<P CLASS=FOOTER>Generated with <A HREF="http://www.harlequin.com/webmaker" CLASS=FOOTER>Harlequin WebMaker&#174;</A></P>

</DIV>
</BODY>
</HTML>
