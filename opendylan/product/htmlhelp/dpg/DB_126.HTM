<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="DB_1.HTM">
<LINK REL=UP HREF="DB_120.HTM">
<LINK REL=PREV HREF="DB_125.HTM">
<LINK REL=NEXT HREF="DB_127.HTM">
<TITLE>10.3   Initialize methods</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING126></A>

<DIV>
<P><A HREF="DB_127.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_125.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
<A NAME=HEADING126-0></A>
<H1>10.3   <A NAME=MARKER-9-331></A>Initia<A NAME=MARKER-2-332></A>lize methods</H1>
<P> Every time you call <CODE>make</CODE> to create an instance of a class, <CODE>make</CODE> calls the <BR><CODE>initialize</CODE> generic function. The purpose of the <CODE>initialize</CODE> generic function <BR>is to initialize the instance before it is returned by <CODE>make</CODE>. You can customize the <BR>initialization by defining a method on <CODE>initialize</CODE>. Methods for <CODE>initialize</CODE> receive the instance as the first argument, and receive all keyword arguments given in the call to <CODE>make</CODE>. </P>
<P>We define an <CODE>initialize</CODE> method:</P>
<PRE>
define method initialize (time :: &lt;time-of-day&gt; #key)	<I>// 1
</I>  next-method();	<I>// 2
</I>  if (time.total-seconds &lt; 0)	<I>// 3
</I>    error(&quot;%d is invalid. total-seconds cannot be negative&quot;, 	<I>// 4
</I>          time.total-seconds);	<I>// 5
</I>  end if;	<I>// 6
</I>end method initialize;	<I>// 7</I>
</PRE>
<P> On line 2, we call <CODE>next-method</CODE>. All methods for <CODE>initialize</CODE> should call <BR><CODE>next-method</CODE> as their first action, to allow any less specific initializations (that is, <BR><CODE>initialize</CODE> methods defined on superclasses) to execute first. If you call <CODE>next-method</CODE> as the first action, then, in the rest of the method, you can operate on an instance that has been properly initialized by any <CODE>initialize</CODE> methods of <BR>superclasses. If you forget to include the call to <CODE>next-method</CODE>, your <CODE>initialize</CODE> method will be operating on an improperly initialized instance.</P>
<P>Lines 3 through 6 contain the real action of this method. We check that the value is valid. If it is invalid, we signal an error.</P>
<P>The following example shows what happens when <CODE>total-seconds</CODE> is not valid when we are creating an instance:</P>
<PRE>
<I>? </I>make(&lt;time-of-day&gt;, total-seconds: -15);
<I>ERROR: -15 is invalid. total-seconds cannot be negative.</I>
</PRE>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Dylan Programming - 9 Apr 1999</ADDRESS>
<P><A HREF="DB_127.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_125.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>N Feinberg/S E Keene/R Mathews/P Tucker Withington, DYLAN PROGRAMMING, (c) 1997 Harlequin Inc. Reproduced by permission of Addison-Wesley Longman Publishing Company, Inc.  All rights reserved. No further copying, downloading or transmitting of this material is allowed without the prior written permission of the publisher.</P>

</DIV>
</BODY>
</HTML>
