<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="DB_1.HTM">
<LINK REL=UP HREF="DB_212.HTM">
<LINK REL=PREV HREF="DB_214.HTM">
<LINK REL=NEXT HREF="DB_216.HTM">
<TITLE>13.8.3   The updated sixty-unit implementation file</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING215></A>

<DIV>
<P><A HREF="DB_216.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_214.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
<A NAME=HEADING215-0></A>
<H1>13.8.3   The <A NAME=MARKER-9-656></A>updated <EM>sixty-unit</EM> implementation file</H1>
<P> </P>
<TABLE BORDER=1><TR VALIGN=TOP><TH><P> The <CODE>sixty-unit</CODE> implementation file: <CODE>sixty-unit.dylan</CODE>.  </P>
</TH></TR><TR VALIGN=TOP><TD><PRE>
Module: sixty-unit-implementation
define open abstract class &lt;sixty-unit&gt; (&lt;object&gt;)
  slot total-seconds :: &lt;integer&gt;,
    required-init-keyword: total-seconds:;
end class &lt;sixty-unit&gt;; 
</TD></TR><TR VALIGN=TOP><TD>define method encode-total-seconds 
    (max-unit :: &lt;integer&gt;, minutes :: &lt;integer&gt;, seconds :: &lt;integer&gt;) 
 =&gt; (total-seconds :: &lt;integer&gt;)
  ((max-unit * 60) + minutes) * 60 + seconds;
end method encode-total-seconds; 
</TD></TR><TR VALIGN=TOP><TD>define method decode-total-seconds 
    (sixty-unit :: &lt;sixty-unit&gt;)
 =&gt; (max-unit :: &lt;integer&gt;, minutes :: &lt;integer&gt;, seconds :: &lt;integer&gt;)
  decode-total-seconds(sixty-unit.total-seconds);
end method decode-total-seconds; 
</TD></TR><TR VALIGN=TOP><TD>define method decode-total-seconds
    (total-seconds :: &lt;integer&gt;)
 =&gt; (hours :: &lt;integer&gt;, minutes :: &lt;integer&gt;, seconds :: &lt;integer&gt;)<I>	</I>  let(total-minutes, seconds) = truncate/(abs(total-seconds), 60);
  let(hours, minutes) = truncate/(total-minutes, 60);
  values(hours, minutes, seconds);
end method decode-total-seconds; 
</TD></TR></TABLE></PRE>
<P> </P>
<P> <A HREF="#MARKER-9-598">Figure 13.5</A> shows the relationships among our libraries and modules at this point. Note that <CODE>sixty-unit</CODE> is now a separate library. It uses the <CODE>dylan</CODE> library and is used by the <CODE>time</CODE> library. We illustrate the <CODE>time</CODE> module importing and re-exporting part of the <CODE>sixty-unit</CODE> interface module (the method <CODE>encode-total-seconds</CODE>) by the darker grey area.</P>
<TABLE BORDER=1><CAPTION><P>Figure 13.5   <A NAME=MARKER-9-598></A><CODE>sixty-unit</CODE> as a separate library. </P>
</CAPTION><TR VALIGN=TOP><TD><P> <A NAME=MARKER-10-599></A><IMG ALIGN=TOP SRC=DB21IM25.GIF></P>
</TD></TR></TABLE>
</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Dylan Programming - 9 Apr 1999</ADDRESS>
<P><A HREF="DB_216.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_214.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>N Feinberg/S E Keene/R Mathews/P Tucker Withington, DYLAN PROGRAMMING, (c) 1997 Harlequin Inc. Reproduced by permission of Addison-Wesley Longman Publishing Company, Inc.  All rights reserved. No further copying, downloading or transmitting of this material is allowed without the prior written permission of the publisher.</P>

</DIV>
</BODY>
</HTML>
