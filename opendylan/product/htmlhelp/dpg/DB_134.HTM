<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="DB_1.HTM">
<LINK REL=UP HREF="DB_120.HTM">
<LINK REL=PREV HREF="DB_133.HTM">
<LINK REL=NEXT HREF="DB_135.HTM">
<TITLE>10.6   Virtual slots</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING134></A>

<DIV>
<P><A HREF="DB_135.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_133.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
<A NAME=HEADING134-0></A>
<H1>10.6   <A NAME=MARKER-9-352></A>Virt<A NAME=MARKER-2-353></A>ual slots</H1>
<P> Virtual slots are useful when there is information conceptually associated with an object that is better computed than stored in an ordinary slot. By using a virtual slot instead of writing a method, you make the information appear like a slot to the callers of the getter. The information appears like a slot because the caller cannot distinguish the getter of a virtual slot from a getter of an ordinary slot. In both cases, the getter takes a single required argument -- the instance -- and returns a single value. </P>
<P>A virtual slot does not occupy storage; instead, its value is computed. When you define a virtual slot, Dylan defines a generic function for the getter and setter. You must define a getter method to return the value of the virtual slot. Unlike those of other slots, the value of a virtual slot can change without a setter being called, because that value is computed, rather than stored. You can optionally define a setter method. If you want to initialize a virtual slot when you create an instance, you can define an <CODE>initialize</CODE> method. </P>
<P>We can use virtual slots to control the access to a slot. For example, we want to ensure that the value of the <CODE>direction</CODE> slot is north or south for <CODE>&lt;latitude&gt;</CODE>, and is east or west for <CODE>&lt;longitude&gt;</CODE>. (An alternative technique is to use enumeration types, as shown in <A HREF="DB_300.HTM#MARKER-9-773">Section 19.5, page 318</A>.) To enforce this restriction, we must</P>
<UL>
<LI><P>Check the value when the setter method is invoked. In this section, we show how to do this check using a virtual slot. We also show how to use symbols, instead of strings, to represent north, south, east, and west.</P>
<LI><P>Check the value of the <CODE>direction</CODE> slot when an instance is created and initialized. We do that checking in <A HREF="DB_137.HTM#MARKER-9-357">Section 10.6.3</A>. </P>
</UL>
<P> We redefine the <CODE>&lt;directed-angle&gt;</CODE> class to include a virtual slot and an ordinary slot: </P>
<PRE>
define abstract class &lt;directed-angle&gt; (&lt;angle&gt;)
  virtual slot direction :: &lt;symbol&gt;;
  slot internal-direction :: &lt;symbol&gt;;
end class &lt;directed-angle&gt;;
</PRE>
<P> We define the slot <CODE>direction</CODE> with the <CODE>virtual</CODE> <B>slot allocation</B>. Notice that the slot's allocation appears before the name of the slot (as contrasted with slot options, which appear after the name of the slot). </P>
<P>In the <CODE>&lt;directed-angle&gt;</CODE> class, we use the slot <CODE>internal-direction</CODE> <BR>to store the direction. We shall provide a setter method for the virtual slot <BR><CODE>direction</CODE> that checks the validity of the value of the direction before storing <BR>the value in the <CODE>internal-direction</CODE> slot.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC --><DL>
<DL>
<DT><A REL=BELOW HREF="DB_135.HTM#HEADING135-0"><B>10.6.1  </B> - Symbols</A>
<DD>
<DT><A REL=BELOW HREF="DB_136.HTM#HEADING136-0"><B>10.6.2  </B> - Getter and setter methods for a virtual slot</A>
<DD>
<DT><A REL=BELOW HREF="DB_137.HTM#HEADING137-0"><B>10.6.3  </B> - Initialize method for a virtual slot</A>
<DD>
</DL>
</DL>


</DIV>

<HR>
<ADDRESS>Dylan Programming - 9 Apr 1999</ADDRESS>
<P><A HREF="DB_135.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_133.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>N Feinberg/S E Keene/R Mathews/P Tucker Withington, DYLAN PROGRAMMING, (c) 1997 Harlequin Inc. Reproduced by permission of Addison-Wesley Longman Publishing Company, Inc.  All rights reserved. No further copying, downloading or transmitting of this material is allowed without the prior written permission of the publisher.</P>

</DIV>
</BODY>
</HTML>
