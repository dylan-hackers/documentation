<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="DB_1.HTM">
<LINK REL=UP HREF="DB_145.HTM">
<LINK REL=PREV HREF="DB_145.HTM">
<LINK REL=NEXT HREF="DB_147.HTM">
<TITLE>11.3.1   Building our own copy-sequence</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING146></A>

<DIV>
<P><A HREF="DB_147.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_145.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
<A NAME=HEADING146-0></A>
<H1>11.3.1   <A NAME=MARKER-9-395></A>Building our own <EM>copy-sequence</EM></H1>
<P> How would we write our own <A NAME=MARKER-2-396></A><CODE>copy-sequence</CODE> function, if Dylan did not already provide one? There are many possible approaches. One way would be to use a <A NAME=MARKER-2-397></A><CODE>while</CODE> loop. A <CODE>while</CODE> loop has a <B>test expression</B> (surrounded by parentheses) and a <B>body</B>. As long as the value of the test expression is true, the body will be executed repeatedly.</P>
<PRE>
define method my-copy-sequence 
    (old-sequence :: &lt;sequence&gt;) =&gt; (new-sequence :: &lt;sequence&gt;)
  let seq-size = old-sequence.size;
  let new-sequence = make(type-for-copy(old-sequence), size: seq-size);
  let index = 0;
  while (index &lt; seq-size)
    new-sequence[index] := old-sequence[index];
    index := index + 1;
  end while;
  new-sequence;
end method my-copy-sequence;
</PRE>
<P> The method <CODE>my-copy-sequence</CODE> makes a new sequence of the same size as its argument, then iterates over all the elements of the argument, storing each element of the sequence into the appropriate element of the new sequence. The <A NAME=MARKER-2-398></A><CODE>size</CODE> generic function returns the number of elements in a collection. In this example, the <CODE>while</CODE> loop terminates when <CODE>index</CODE> reaches the size of the sequence. </P>
<P>The <A NAME=MARKER-2-399></A><CODE>type-for-copy</CODE> generic function returns an appropriate class for <CODE>make</CODE>, given an object that you wish to copy. For most collections, <CODE>type-for-copy</CODE> just returns the class of the collection provided.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Dylan Programming - 9 Apr 1999</ADDRESS>
<P><A HREF="DB_147.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_145.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>N Feinberg/S E Keene/R Mathews/P Tucker Withington, DYLAN PROGRAMMING, (c) 1997 Harlequin Inc. Reproduced by permission of Addison-Wesley Longman Publishing Company, Inc.  All rights reserved. No further copying, downloading or transmitting of this material is allowed without the prior written permission of the publisher.</P>

</DIV>
</BODY>
</HTML>
