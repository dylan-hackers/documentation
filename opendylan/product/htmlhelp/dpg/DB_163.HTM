<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="DB_1.HTM">
<LINK REL=UP HREF="DB_158.HTM">
<LINK REL=PREV HREF="DB_162.HTM">
<LINK REL=NEXT HREF="DB_164.HTM">
<TITLE>11.5.5   Search of arrays with for and block</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING163></A>

<DIV>
<P><A HREF="DB_164.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_162.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
<A NAME=HEADING163-0></A>
<H1>11.5.5   Search of arrays with <EM><A NAME=MARKER-2-429></A><A NAME=MARKER-2-430></A>for</EM> and <EM><A NAME=MARKER-2-431></A>block</EM></H1>
<P> Suppose that you wanted to search a two-dimensional array, and to return the first number greater than a given value. </P>
<PRE>
define method find-larger-than 
    (2d-array :: &lt;array&gt;, value :: &lt;integer&gt;)
 =&gt; (result :: type-union(singleton(#f), &lt;integer&gt;))
  let first-dimension = dimension(2d-array, 0);
  let second-dimension = dimension(2d-array, 1);
  block (return)
    for (i from 0 below first-dimension)
      for (j from 0 below second-dimension)
        if (2d-array[i, j] &gt; value)
          return(2d-array[i, j]);
        end if;
      end for;
    end for;
    #f;
  end block;
end method find-larger-than;
</PRE>
<P> In the preceding example, the <CODE>block</CODE> statement binds the variable <CODE>return</CODE> to a <B>nonlocal exit procedure</B>. If this exit procedure is called while the <CODE>block</CODE> is in effect, it will return immediately from the <CODE>block</CODE> statement, using any provided arguments as return values. Thus, if an element of <CODE>2d-array</CODE> is greater than <CODE>value</CODE>, then this element will be returned immediately from the <CODE>block</CODE>, and thus from the method. Array elements can be accessed with the square-bracket syntax, or with the function <A NAME=MARKER-2-432></A><CODE>aref</CODE>. (For more information about referencing elements of an array, see <A HREF="DB_170.HTM#MARKER-9-455">Section 12.1.3, page 164</A>.) If the entire array is searched, and no element is found that is greater than <CODE>value</CODE>, then the <CODE>for</CODE> loops exit normally and the <CODE>block</CODE> statement returns the last value in the <CODE>block</CODE> body, which in this case is false. We use the <A NAME=MARKER-2-433></A><CODE>type-union</CODE> type-generating function to create a type that permits either false or an integer to be returned from this method.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Dylan Programming - 9 Apr 1999</ADDRESS>
<P><A HREF="DB_164.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_162.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>N Feinberg/S E Keene/R Mathews/P Tucker Withington, DYLAN PROGRAMMING, (c) 1997 Harlequin Inc. Reproduced by permission of Addison-Wesley Longman Publishing Company, Inc.  All rights reserved. No further copying, downloading or transmitting of this material is allowed without the prior written permission of the publisher.</P>

</DIV>
</BODY>
</HTML>
