<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="DB_1.HTM">
<LINK REL=UP HREF="DB_252.HTM">
<LINK REL=PREV HREF="DB_253.HTM">
<LINK REL=NEXT HREF="DB_255.HTM">
<TITLE>16.1.2   Basic collection methods</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING254></A>

<DIV>
<P><A HREF="DB_255.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_253.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
<A NAME=HEADING254-0></A>
<H1>16.1.2   <A NAME=MARKER-9-693></A>Basic collection methods
<TABLE BORDER=1><TH ROWSPAN="" COLSPAN=""><P>The <CODE>sorted-sequence.dylan</CODE> file. <I>(continued)</I></P><TR>
<TD ROWSPAN="" COLSPAN=""><P>define method size (sorted-sequence :: &lt;sorted-sequence&gt;) <BR>    =&gt; (sorted-sequence-size :: &lt;integer&gt;)<BR>  sorted-sequence.data.size;<BR>end method size; </P><TR>
<TD ROWSPAN="" COLSPAN=""><P>define method shallow-copy (sorted-sequence :: &lt;sorted-sequence&gt;) <BR>    =&gt; (copy :: &lt;sorted-sequence&gt;)<BR>  let copy <BR>    = make(&lt;sorted-sequence&gt;,<BR>           value-function: sorted-sequence.value-function,<BR>           comparison-function: sorted-sequence.comparison-function);<BR><I>  // The map-into function replaces the elements of the copy's data array<BR>  // to be the identical elements of the data array of sorted sequence<BR></I>  copy.data.size := sorted-sequence.data.size;<BR>  map-into(copy.data, identity, sorted-sequence.data);<BR>  copy;<BR>end method shallow-copy; </P><TR>
<TD ROWSPAN="" COLSPAN=""><P>define constant $unsupplied = list(#f);</P><P>define method element <BR>    (sorted-sequence :: &lt;sorted-sequence&gt;, key :: &lt;integer&gt;, <BR>     #key default = $unsupplied) <BR> =&gt; (element :: &lt;object&gt;);<BR>  if (key &lt; sorted-sequence.data.size) <BR>    sorted-sequence.data[key];<BR>  elseif (default = $unsupplied)<BR>    error(&quot;Attempt to access key %= which is outside of %=.&quot;, key, <BR>          sorted-sequence);<BR>  else default;<BR>  end if;<BR>end method element; </P></TABLE>
</H1>
<P> </P>
<P> In the preceding code, we define methods for determining the number of elements in the sorted sequence, for copying the sorted sequence (but not the elements stored in the sorted sequence), and for accessing a particular item in the sorted sequence. Once we have defined the <CODE>element</CODE> method for sorted sequences, we can use the subscripting syntax to access particular items in the sorted sequence. Our <CODE>element</CODE> method implements the standard Dylan protocol, which allows the caller to specify a default value if the key is not contained within the collection. If the key is not part of the collection, and no default value is specified, then an error is signaled. Since we do not export <CODE>$unsupplied</CODE> from our library, we can be certain that no one can supply that value as the <CODE>default</CODE> keyword parameter for our <CODE>element</CODE> method.</P>
<P>Note that the <CODE>element-setter</CODE> method is not defined, because it does not make sense to store an element at a particular position within the sorted sequence. The sorted sequence itself determines the correct key for each item added to the sorted sequence, based on the item being added and on the value and comparison functions.</P>
<P>Next, we show methods for adding and removing elements from sorted sequences.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Dylan Programming - 9 Apr 1999</ADDRESS>
<P><A HREF="DB_255.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_253.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>N Feinberg/S E Keene/R Mathews/P Tucker Withington, DYLAN PROGRAMMING, (c) 1997 Harlequin Inc. Reproduced by permission of Addison-Wesley Longman Publishing Company, Inc.  All rights reserved. No further copying, downloading or transmitting of this material is allowed without the prior written permission of the publisher.</P>

</DIV>
</BODY>
</HTML>
