<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental) -->
<HEAD>
<LINK REL=TOP HREF="DB_1.HTM">
<LINK REL=UP HREF="DB_145.HTM">
<LINK REL=PREV HREF="DB_149.HTM">
<LINK REL=NEXT HREF="DB_151.HTM">
<TITLE>11.3.5   Mapping functions</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997 experimental)">
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV>
<A NAME=HEADING150></A>

<DIV>
<P><A HREF="DB_151.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_149.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
<A NAME=HEADING150-0></A>
<H1>11.3.5   <A NAME=MARKER-9-405></A>Map<A NAME=MARKER-9-406></A>ping functions</H1>
<P> Iterating over all the elements of a collection is a common idiom, and Dylan provides several different mapping functions that accomplish these kinds of iterations in different ways. In the following example, we redefine the <CODE>my-copy-sequence</CODE> method originally defined in <A HREF="DB_148.HTM#MARKER-9-402">Section 11.3.3</A>. Here, we use the <A NAME=MARKER-2-407></A><CODE>do</CODE> iteration construct, instead of a <CODE>for</CODE> loop. </P>
<PRE>
<I>// Assumes that old-list is a proper list (that is, it ends with #()) 
// and is not circular
</I>define method my-copy-sequence (old-list :: &lt;list&gt;) =&gt; (new-list :: &lt;list&gt;)
  let new-list = make(&lt;list&gt;, size: old-list.size);
<I>  // Remember the pair of the copy that we are initializing
</I>  let current-pair = new-list;
<I>    // Iterate over all the elements of the existing list, making new pairs,
    // and splicing them into the end of the copy that we are building
</I>  do(method (old-element)
       current-pair.head := old-element;
       current-pair := current-pair.tail;
     end method,
     old-list);
  new-list;
end method my-copy-sequence;
</PRE>
<P> The <CODE>do</CODE> mapping function takes a function and one or more collections, and calls the function on each element of each collection. The function should take one argument if you provide <CODE>do</CODE> with one collection, two arguments if you provide two collections, and so on. The result of calling the function is ignored, and <CODE>do</CODE> itself returns no meaningful value. The <CODE>do</CODE> function is useful only if the method that you provide accomplishes a valuable side effect. In the preceding example, the supplied method stores an element of the old list into the head of the current pair of the new list, and moves to the next pair of the new list. Note that this method is actually a closure, which closes over the <CODE>current-pair</CODE> local variable. See <A HREF="DB_188.HTM#MARKER-9-568">Section 12.3.6, page 183</A>, for more information about closures.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Dylan Programming - 9 Apr 1999</ADDRESS>
<P><A HREF="DB_151.HTM"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="DB_149.HTM"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="DB_1.HTM"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="DB_2.HTM"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="DB_349.HTM"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>N Feinberg/S E Keene/R Mathews/P Tucker Withington, DYLAN PROGRAMMING, (c) 1997 Harlequin Inc. Reproduced by permission of Addison-Wesley Longman Publishing Company, Inc.  All rights reserved. No further copying, downloading or transmitting of this material is allowed without the prior written permission of the publisher.</P>

</DIV>
</BODY>
</HTML>
